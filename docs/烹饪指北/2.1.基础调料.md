# è°ƒæ–™

åœ¨è¿™éƒ¨åˆ†ï¼Œå¤šæ•°æ˜¯åšä¸€äº›åŸºç¡€é…ç½®ï¼ˆå¤šä¸ªé¡¹ç›®é€šç”¨çš„é…ç½®æŠ½è±¡å‡ºæ¥æˆä¸ºä¸€ä¸ªå­åŒ…ï¼‰ä»¥åŠç»„ç»‡å·¥ç¨‹ç»“æ„çš„æ“ä½œï¼Œ

- tsconfig
- lint-configs
  - eslint-config
  - prettier-config
  - commitlint-config
  - stylelint-config
- tailwind-config
- vite-config

å®ƒä»¬çš„ç»Ÿä¸€å‘½åæ ¼å¼ä¸ºï¼š`@o-oyic/xxx`

> å…¶ä¸­çš„tailwindå’Œviteçš„é…ç½®ï¼Œæˆ‘å…ˆå®šä¹‰å¥½äº†æ”¾åœ¨è¿™é‡Œï¼Œç­‰åˆ°éœ€è¦è¿™äº›å†…å®¹çš„å­åŒ…å¼€å§‹äº†ä¹‹åï¼Œæ‰åˆ°è¿™é‡Œåšé…ç½®ã€‚

## ç›®å½•ç»“æ„

åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¹¶è®©å®ƒæˆä¸ºmonorepoå·¥ä½œåŒºï¼Œå¹¶åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º`pnpm-workspace.yaml`æ–‡ä»¶ï¼š

```yaml
packages:
  - 'apps/*'
  - 'packages/*'
  - 'internal/*'
  - 'docs/*'
```

ä¹Ÿå°±æ˜¯éœ€è¦åˆ›å»ºä¸Šé¢çš„è¿™ä¹ˆå¤šä¸ªå­åŒ…å—·

### å·¥ä½œåŒº

æ·»åŠ ä¸€ä¸ªå·¥ä½œåŒºçš„é…ç½®æ–‡ä»¶ï¼Œä¸ºäº†å¥½æ‰¾ï¼Œä¹Ÿä¸ºäº†æœ‰ä¸ªæ˜ å°„å…³ç³»ï¼Œç›´æ¥åˆ›å»ºä¸€âœ‹ğŸ»å·¥ä½œåŒºæ–‡ä»¶ï¼šo-oyic.code-workspaceï¼Œå°†ç›®å‰å·²æœ‰çš„æˆ–åœ¨è®¡åˆ’ä¸­çš„å­åŒ…æ”¾è¿›å»ï¼ˆæ²¡æœ‰çš„åé¢å†è¡¥å—·ï¼‰

```json
{
  "folders": [
    {
      "name": "@o-oyic/tsconfig",
      "path": "internal/lint-config/tsconfig"
    },
    {
      "name": "@o-oyic/eslint-config",
      "path": "internal/lint-config/eslint-config"
    }
  ]
}
```

## åŸºç¡€é…ç½®

### tsconfig

ç”±ä¸€å †jsonæ–‡ä»¶ç»„æˆï¼Œä¸éœ€è¦æ‰“åŒ…æ„å»ºï¼Œç›´æ¥åœ¨`package.json`ä¸­å®šä¹‰å¯¼å‡ºæ–‡ä»¶çš„åˆ—è¡¨å³å¯

### lint-configs

linté¡¹ç›®æ˜¯å¤šä¸ªé…ç½®çš„é›†åˆï¼ŒåŒ…å«äº†ï¼š

- eslint
- prettier
- stylelint
- commitlint

#### eslint

éœ€è¦å®šä¹‰çš„é…ç½®ï¼š

- JavaScript
- typescript
- vue
- react
- command
- import
- ignore

ç»Ÿä¸€ç”¨`interopDefault`æ–¹æ³•å¯¼å…¥ä¾èµ–ï¼Œè¿”å›`Promise`ï¼Œåœ¨å…¥å£å¤„`index`æ–‡ä»¶ç»Ÿä¸€å¯¼å‡º

è¿™æ ·é¡¹ç›®åœ¨è¿è¡Œ`pnpm install`çš„æ—¶å€™ï¼Œå¯ä»¥åˆ©ç”¨`pnpm`çš„ç”Ÿå‘½å‘¨æœŸï¼š

- preinstallï¼šåœ¨å®‰è£…ä¾èµ–é¡¹ä¹‹å‰è¿è¡Œã€‚
- installï¼šåœ¨å®‰è£…ä¾èµ–é¡¹æ—¶è¿è¡Œã€‚
- postinstallï¼šåœ¨å®‰è£…ä¾èµ–é¡¹ä¹‹åè¿è¡Œã€‚
- prepareï¼šåœ¨åŒ…å‡†å¤‡é˜¶æ®µè¿è¡Œï¼Œä¾‹å¦‚åœ¨ pnpm pack æˆ– pnpm publish æ—¶ã€‚

åœ¨`postinstall`è¿›è¡Œå·¥ä½œåŒºçš„ä¾èµ–æ„å»ºï¼Œåœ¨ä¸»åŒ…çš„`package.json`é‡Œé¢å®šä¹‰è„šæœ¬

```json
{
  "scripts":{
    "preinstall": "npx only-allow pnpm", // åªå…è®¸ä½¿ç”¨pnpm
    // install
    "postinstall": "pnpm -r run stub --if-present",
  }
}
```
